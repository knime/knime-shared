{{>licenseInfoCom}}
package {{package}};

import com.knime.enterprise.gateway.rest.api.{{baseName}};

import com.fasterxml.jackson.databind.node.ArrayNode;
import com.fasterxml.jackson.databind.node.JsonNodeFactory;

import javax.ws.rs.core.Response;

/**
 * Implementation of {@link {{baseName}}}. 
 * Essentially forwards the requests via json-rpc 2.0 to the executor.
 *
 {{>authors}}
 */
{{>generatedAnnotation}}
public class {{classname}} extends AbstractGatewayRESTService implements {{baseName}} {

{{#operations}}
{{#operation}}

    {{#summary}}
    /**
     * {{summary}}
     *
     {{#notes}}
     * {{notes}}
     *
     {{/notes}}
     */
    {{/summary}}
    @Override
    public Response {{nickname}}({{#allParams}}{{#isBodyParam}}byte[]{{/isBodyParam}}{{^isBodyParam}}{{>rest/paramDataType}}{{/isBodyParam}} {{paramName}}{{#hasMore}}, {{/hasMore}}{{/allParams}})
       {{>throwsServerExceptions}} {
        ArrayNode params = JsonNodeFactory.instance.arrayNode();
        {{#allParams}}
        {{#isBodyParam}}
        params.add(getObjectMapper().readTree({{paramName}}));
       	{{/isBodyParam}} 
        {{^isBodyParam}}
        {{^isPrimitiveType}}
        params.add({{paramName}} == null ? null : {{paramName}}.toString());
        {{/isPrimitiveType}}
        {{#isPrimitiveType}}
        params.add({{paramName}});
        {{/isPrimitiveType}}
        {{/isBodyParam}}
        {{/allParams}}
        {{#vendorExtensions.x-knime-gateway-custom-server-implementation}}
        return {{vendorExtensions.x-knime-gateway-custom-server-implementation.methodToCall}}(jobId, "{{baseName}}Service.{{nickname}}", params, this);
        {{/vendorExtensions.x-knime-gateway-custom-server-implementation}}
        {{^vendorExtensions.x-knime-gateway-custom-server-implementation}}
        {{#isResponseBinary}}
        {{#vendorExtensions.x-knime-gateway-static-response}}
        return sendGenericStaticBinaryJsonRpcRequest(jobId, "{{baseName}}Service.{{nickname}}", params, "{{{produces.0.mediaType}}}");
        {{/vendorExtensions.x-knime-gateway-static-response}}
        {{^vendorExtensions.x-knime-gateway-static-response}}
        return sendGenericBinaryJsonRpcRequest(jobId, "{{baseName}}Service.{{nickname}}", params, "{{{produces.0.mediaType}}}");
        {{/vendorExtensions.x-knime-gateway-static-response}}
		{{/isResponseBinary}}
		{{^isResponseBinary}}
		return sendGenericJsonRpcRequest(jobId, "{{baseName}}Service.{{nickname}}", params, "{{{produces.0.mediaType}}}"{{#vendorExtensions.x-knime-gateway-executor-exception-if-job-is-swapped}}, "{{{vendorExtensions.x-knime-gateway-executor-exception-if-job-is-swapped}}}"{{/vendorExtensions.x-knime-gateway-executor-exception-if-job-is-swapped}});
		{{/isResponseBinary}}
        {{/vendorExtensions.x-knime-gateway-custom-server-implementation}}
    }
{{/operation}}

}
{{/operations}}

